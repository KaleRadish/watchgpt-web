<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>WatchGPT Math</title>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
</head>
<body>
  <p style="color:white;background:black;padding:1em;">
    Firebase is not currently supported in this sandbox environment. To make your app work:
  </p>
  <ol style="color:white;background:black;padding:1em;">
    <li>Download this file and run it in a local development environment (e.g., using <code>Live Server</code> in VS Code).</li>
    <li>Make sure your internet connection allows fetching Firebase SDKs from <code>gstatic.com</code>.</li>
    <li>Ensure Firebase is initialized only after its script is fully loaded. This file does that below ⬇</li>
  </ol>

  <div id="math" style="color:white;padding:1em;">$$E=mc^2$$</div>
  <script>
    renderMathInElement(document.getElementById("math"), {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  </script>

  <!-- Safe Firebase init -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const firebaseConfig = {
        apiKey: "AIzaSyC3uih4l9_CqwAjev31oFccEw_Yc9K-30E",
        authDomain: "watchgpt-sync.firebaseapp.com",
        databaseURL: "https://watchgpt-sync-default-rtdb.firebaseio.com",
        projectId: "watchgpt-sync",
        storageBucket: "watchgpt-sync.firebasestorage.app",
        messagingSenderId: "376294333041",
        appId: "1:376294333041:web:a7fc8fc82a0aed3d4719d0"
      };

      firebase.initializeApp(firebaseConfig);
      window.db = firebase.firestore(); // Global access for your app
      console.log("✅ Firebase initialized and Firestore ready.");
    });
  </script>
</body>
</html>
